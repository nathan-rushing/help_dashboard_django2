{% extends 'online_help/base.html' %}
{% load static %}
{% block content %}
<link rel="stylesheet" href="{% static 'css/view_all.css' %}">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">

<h1>All Tasks</h1>

<form method="get" class="form-inline mb-3">
    <label for="document" class="mr-2">Filter by Document:</label>
    <select name="document" id="document" class="form-control mr-3">
        <option value="">All</option>
        {% for doc in documents %}
            <option value="{{ doc.id }}" {% if request.GET.document == doc.id|stringformat:"s" %}selected{% endif %}>
                {{ doc.title }}
            </option>
        {% endfor %}
    </select>

    <label for="color" class="mr-2">Filter by Color:</label>
    <select name="color" id="color" class="form-control mr-3">
        <option value="">All</option>
        {% for color in colors %}
            <option value="{{ color }}" {% if request.GET.color == color %}selected{% endif %}>
                {{ color }}
            </option>
        {% endfor %}
    </select>

    <button type="submit" class="btn btn-primary">Filter</button>
</form>


<table class="task-table">
    <thead>
        <tr>
            <th>Document</th>
            <th>Section</th>
            <th>Subsection</th>
            <th>SME</th>
        </tr>
    </thead>
    <tbody>
        {% for task in tasks %}
        <tr style="background-color: {{ task.color }};">
            <td>{{ task.document.title }}</td>
            <td>{{ task.section }}</td>
            <td>{{ task.sub_section }}</td>
            <td>{{ task.SME }}</td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="4" class="no-tasks">No tasks found.</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}
